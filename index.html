<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Articles Cloze Test — C2 British English</title>
  <style>
    :root{font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.5;color:#111}
    body{max-width:980px;margin:28px auto;padding:22px;background:#fff;border:1px solid #e6e6e6;border-radius:10px}
    header{display:flex;gap:18px;align-items:center}
    h3{font-size:1.25rem;margin:0}
    p.intro{margin:12px 0 18px;color:#333}
    form{margin-top:6px}
    .question{padding:12px;border-radius:6px;background:#fbfbfb;border:1px solid #efefef;margin-bottom:12px;display:flex;flex-direction:column;gap:8px}
    .qmeta{font-size:0.92rem;color:#222}
    .choices{display:flex;gap:10px;flex-wrap:wrap}
    .choice{background:#fff;border:1px solid #d0d7de;padding:8px 12px;border-radius:8px;cursor:pointer;user-select:none;min-width:90px;text-align:center}
    .choice input{display:none}
    .choice.selected{border-color:#0b6efd;background:#eaf2ff}
    .controls{display:flex;gap:10px;align-items:center;margin:16px 0;flex-wrap:wrap}
    button{background:#0b6efd;color:#fff;padding:10px 14px;border:0;border-radius:8px;cursor:pointer}
    button.secondary{background:#f3f4f6;color:#111;border:1px solid #d1d5db}
    .result{padding:12px;margin-top:10px;border-radius:6px}
    .correct{background:#e6ffec;border:1px solid #b7f0c2;color:#0a7a2e}
    .incorrect{background:#fff2f2;border:1px solid #f0b5b5;color:#9b2616}
    .explain{font-size:0.95rem;color:#222;margin-top:6px}
    footer{margin-top:18px;font-size:0.86rem;color:#555}
    .small{font-size:0.86rem;color:#444}
    code{background:#f6f8fa;padding:2px 6px;border-radius:4px;font-family:Consolas,monospace}
  </style>
</head>
<body>
  <header>
    <div>
      <h3>Articles Cloze Test</h3>
    </div>
  </header>

  <form id="quiz" autocomplete="off" onsubmit="return false;">
    <!-- 20 fixed-order questions -->
    <div class="question" data-id="q1">
      <div class="qmeta"><strong>1</strong> — She finally published ______ paper that synthesised decades of climate research.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q2">
      <div class="qmeta"><strong>2</strong> — He served as ______ intermediary between the two departments to resolve the dispute.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q3">
      <div class="qmeta"><strong>3</strong> — During the voyage they spotted ______ albatross gliding close to the stern.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q4">
      <div class="qmeta"><strong>4</strong> — Many critics hailed the novel as ______ modern classic in postwar literature.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q5">
      <div class="qmeta"><strong>5</strong> — If you need ______ advice on trademark registration, consult an IP specialist.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q6">
      <div class="qmeta"><strong>6</strong> — He has ______ uncanny ability to predict market shifts before they occur.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q7">
      <div class="qmeta"><strong>7</strong> — They produced ______ documentary that examines urban migration in depth.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q8">
      <div class="qmeta"><strong>8</strong> — She left ______ university in 2007 and started a career in diplomacy.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q9">
      <div class="qmeta"><strong>9</strong> — To pass the exam, candidates must demonstrate mastery of ______ subjunctive mood and register shifts.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q10">
      <div class="qmeta"><strong>10</strong> — After the lecture we joined ______ queue for the author’s signing.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q11">
      <div class="qmeta"><strong>11</strong> — She gave him ______ look that indicated she expected immediate action.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q12">
      <div class="qmeta"><strong>12</strong> — Urban planners discussed ______ potential of converting brownfield sites into parks.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q13">
      <div class="qmeta"><strong>13</strong> — They adopted ______ new protocol to ensure data integrity across the network.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q14">
      <div class="qmeta"><strong>14</strong> — He was awarded ______ OBE for services to contemporary dance.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q15">
      <div class="qmeta"><strong>15</strong> — The committee reached ______ consensus after a three-hour debate.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q16">
      <div class="qmeta"><strong>16</strong> — For this recipe you need ______ egg, two tablespoons of flour and ______ pinch of salt.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q17">
      <div class="qmeta"><strong>17</strong> — Travellers often underestimate ______ time required to clear customs at major hubs.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q18">
      <div class="qmeta"><strong>18</strong> — They argued that ______ idea of 'authenticity' in heritage tourism is contestable.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q19">
      <div class="qmeta"><strong>19</strong> — He recommended reading ______ original text rather than relying on abridged editions.</div>
      <div class="choices"></div>
    </div>

    <div class="question" data-id="q20">
      <div class="qmeta"><strong>20</strong> — On arrival she noticed ______ silence that usually precedes a major announcement.</div>
      <div class="choices"></div>
    </div>

    <div class="controls">
      <button id="check">Check answers</button>
      <button id="clear" class="secondary">Clear saved answers</button>
      <div class="small" id="status">Selections are saved locally as you choose them.</div>
    </div>

    <div id="feedback"></div>

    <footer>
      <div class="small">Designed for advanced practice in article usage.</div>
    </footer>
  </form>

  <script>
    const OPTIONS = ["the","a","an","nothing"];
    const ANSWERS = {
      q1: {ans:"a", expl:"'a paper' emphasises one (new) paper among others; indefinite article fits because it's newly published and non-specific."},
      q2: {ans:"an", expl:"'an intermediary' — 'intermediary' begins with a vowel sound; use 'an' before vowel sounds."},
      q3: {ans:"an", expl:"'an albatross' — 'albatross' begins with a vowel sound; use 'an'."},
      q4: {ans:"a", expl:"'a modern classic' — indefinite article for categorising the novel as one such classic."},
      q5: {ans:"no", expl:"Use no article: 'consult IP specialist' is natural in this register when referring to specialists in general."},
      q6: {ans:"an", expl:"'an uncanny ability' — 'uncanny' begins with a vowel sound; use 'an'."},
      q7: {ans:"a", expl:"'a documentary' — indefinite article introduces one film among possible documentaries."},
      q8: {ans:"no", expl:"No article: 'left university' is the normal collocation in British English when stating where one previously studied."},
      q9: {ans:"the", expl:"'the subjunctive mood' refers to a specific grammatical category; use 'the' for definite reference."},
      q10: {ans:"the", expl:"'the queue' refers to the specific queue formed after the lecture; definite article used for identifiable queue."},
      q11: {ans:"a", expl:"'a look' — one particular glance; indefinite article for a single countable gesture."},
      q12: {ans:"the", expl:"'the potential' refers to a specific potential previously under discussion (converting brownfield sites); use 'the'."},
      q13: {ans:"a", expl:"'a new protocol' — introduces one particular protocol among possible protocols; indefinite article required."},
      q14: {ans:"an", expl:"'an OBE' — OBE is pronounced with an initial vowel sound ('oh'), so 'an' is used."},
      q15: {ans:"no", expl:"No article: 'reached consensus' is idiomatic without an article in this context."},
      q16: {ans:"an; a", expl:"First blank 'an egg' because 'egg' begins with a vowel sound; second blank 'a pinch' is the collocation."},
      q17: {ans:"the", expl:"'the time required' refers to a specific amount of time known or expected; definite article used."},
      q18: {ans:"the", expl:"'the idea' refers to a particular theoretical concept being discussed; use 'the'."},
      q19: {ans:"the", expl:"'the original text' — definite because it specifies the unabridged source compared with abridged editions."},
      q20: {ans:"the", expl:"'the silence' refers to a particular silence in that setting; definite article is appropriate."}
    };

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length -1; i>0; i--) {
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function renderChoices() {
      document.querySelectorAll('.question').forEach(q => {
        const id = q.dataset.id;
        const cont = q.querySelector('.choices');
        cont.innerHTML = '';
        const order = shuffle(OPTIONS);
        order.forEach(opt => {
          const lbl = document.createElement('label');
          lbl.className = 'choice';
          lbl.tabIndex = 0;
          const inp = document.createElement('input');
          inp.type = 'radio';
          inp.name = id;
          inp.value = opt;
          lbl.appendChild(inp);
          lbl.appendChild(document.createTextNode(opt === 'nothing' ? '(nothing)' : opt));
          lbl.addEventListener('click', ()=> selectChoice(lbl, inp));
          lbl.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); lbl.click(); }});
          cont.appendChild(lbl);
        });
        const saved = localStorage.getItem('articles-'+id);
        if (saved) {
          const inputToSelect = cont.querySelector('input[value="'+saved+'"]');
          if (inputToSelect) {
            inputToSelect.checked = true;
            inputToSelect.parentElement.classList.add('selected');
          }
        }
      });
    }

    function selectChoice(label, input) {
      const choices = label.parentElement;
      choices.querySelectorAll('.choice').forEach(c => c.classList.remove('selected'));
      label.classList.add('selected');
      input.checked = true;
      localStorage.setItem('articles-'+input.name, input.value);
      document.getElementById('status').textContent = 'Progress saved locally.';
    }

    function display(opt) {
      if (!opt) return 'no answer';
      return opt === 'nothing' ? '(nothing)' : opt;
    }

    function checkAnswers() {
      const fb = document.getElementById('feedback');
      fb.innerHTML = '';
      let score = 0;
      Object.keys(ANSWERS).forEach(qid => {
        const record = ANSWERS[qid];
        const expected = record.ans;
        const expl = record.expl;
        const saved = localStorage.getItem('articles-'+qid);
        const block = document.createElement('div');
        block.className = 'result';
        if (qid === 'q16') {
          const expectedParts = expected.split(';').map(s=>s.trim());
          let correct = false;
          if (saved && saved.includes(';')) {
            const parts = saved.split(';').map(s=>s.trim());
            if (parts.length === 2 && parts[0] === expectedParts[0] && parts[1] === expectedParts[1]) correct = true;
          } else {
            if (saved === expectedParts[0]) correct = true;
          }
          if (correct) {
            block.classList.add('correct');
            block.innerHTML = '<strong>Question 16 — Correct</strong><div class="explain">You chose <strong>'+display(saved)+'</strong>.</div>';
            score++;
          } else {
            block.classList.add('incorrect');
            block.innerHTML = '<strong>Question 16 — Incorrect</strong><div class="explain">Your answer: <strong>'+display(saved)+'</strong> — Correct answer: <strong>'+expected.replace(';', ' and ')+'</strong>.</div>';
            const r = document.createElement('div'); r.className='explain'; r.innerHTML = '<em>Why:</em> '+expl;
            block.appendChild(r);
          }
        } else {
          if (saved === expected || (expected==="no" && (saved==="nothing" || !saved))) {
            block.classList.add('correct');
            block.innerHTML = '<strong>Question '+qid.slice(1)+' — Correct</strong><div class="explain">You chose <strong>'+display(saved)+'</strong>.</div>';
            score++;
          } else {
            block.classList.add('incorrect');
            block.innerHTML = '<strong>Question '+qid.slice(1)+' — Incorrect</strong><div class="explain">Your answer: <strong>'+display(saved)+'</strong> — Correct answer: <strong>'+(expected==="no" ? '(nothing)' : expected)+'</strong>.</div>';
            const r = document.createElement('div'); r.className='explain'; r.innerHTML = '<em>Why:</em> '+expl;
            block.appendChild(r);
          }
        }
        fb.appendChild(block);
      });
      const summary = document.createElement('div');
      summary.className = 'small';
      summary.style.marginTop = '10px';
      summary.textContent = 'Score: '+score+' / '+Object.keys(ANSWERS).length;
      fb.prepend(summary);
      fb.scrollIntoView({behavior:'smooth'});
    }

    function clearSaved() {
      if (!confirm('Clear all saved answers?')) return;
      Object.keys(ANSWERS).forEach(k => localStorage.removeItem('articles-'+k));
      document.getElementById('status').textContent = 'Saved answers cleared.';
      renderChoices();
      document.getElementById('feedback').innerHTML = '';
    }

    document.addEventListener('change', e => {
      if (e.target && e.target.tagName === 'INPUT' && e.target.type === 'radio') {
        const lbl = e.target.parentElement;
        const choices = lbl.parentElement;
        choices.querySelectorAll('.choice').forEach(c => c.classList.remove('selected'));
        lbl.classList.add('selected');
        localStorage.setItem('articles-'+e.target.name, e.target.value);
      }
    });

    document.getElementById('check').addEventListener('click', checkAnswers);
    document.getElementById('clear').addEventListener('click', clearSaved);

    renderChoices();
  </script>
</body>
</html>
